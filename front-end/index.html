<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MarketDAO</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js" type="application/javascript"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>MarketDAO</h1>
            <div class="wallet-connection">
                <span id="wallet-address">Not connected</span>
                <button id="connect-wallet" class="btn">Connect Wallet</button>
            </div>
        </header>

        <div class="dao-info" id="dao-info">
            <h2>DAO Information</h2>
            <div class="info-grid">
                <div class="info-item">
                    <h3>Name</h3>
                    <p id="dao-name">Loading...</p>
                </div>
                <div class="info-item">
                    <h3>Support Threshold</h3>
                    <p id="support-threshold">Loading...</p>
                </div>
                <div class="info-item">
                    <h3>Quorum</h3>
                    <p id="quorum">Loading...</p>
                </div>
                <div class="info-item">
                    <h3>Max Proposal Age</h3>
                    <p id="max-proposal-age">Loading...</p>
                </div>
                <div class="info-item">
                    <h3>Election Duration</h3>
                    <p id="election-duration">Loading...</p>
                </div>
                <div class="info-item">
                    <h3>Token Price</h3>
                    <p id="token-price">Loading...</p>
                </div>
                <div class="info-item">
                    <h3>Your Balance</h3>
                    <p id="governance-balance">Loading...</p>
                </div>
            </div>
            <div class="token-purchase" id="token-purchase-section">
                <h3>Purchase Governance Tokens</h3>
                <div class="input-group">
                    <input type="number" id="purchase-amount" min="1" placeholder="Amount in ETH">
                    <button id="purchase-tokens" class="btn">Purchase</button>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab-button active" data-tab="proposals">Proposals</button>
            <button class="tab-button" data-tab="elections">Elections</button>
            <button class="tab-button" data-tab="history">History</button>
        </div>

        <div class="tab-content">
            <div id="proposals" class="tab-pane active">
                <div class="create-proposal">
                    <h2>Create Proposal</h2>
                    <div class="proposal-form">
                        <div class="form-group">
                            <label for="proposal-type">Proposal Type</label>
                            <select id="proposal-type">
                                <option value="resolution">Resolution</option>
                                <option value="treasury">Treasury Transfer</option>
                                <option value="mint">Mint Governance Tokens</option>
                                <option value="price">Change Token Price</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="proposal-description">Description</label>
                            <textarea id="proposal-description" rows="3" placeholder="Enter proposal description"></textarea>
                        </div>
                        
                        <!-- Resolution Proposal - no additional fields -->
                        
                        <!-- Treasury Proposal Fields -->
                        <div class="form-group proposal-field treasury-field" style="display: none;">
                            <label for="treasury-recipient">Recipient Address</label>
                            <input type="text" id="treasury-recipient" placeholder="0x...">
                        </div>
                        <div class="form-group proposal-field treasury-field" style="display: none;">
                            <label for="treasury-amount">Amount</label>
                            <input type="number" id="treasury-amount" placeholder="Amount">
                        </div>
                        <div class="form-group proposal-field treasury-field" style="display: none;">
                            <label for="treasury-token">Token Address</label>
                            <input type="text" id="treasury-token" placeholder="0x... (leave empty for ETH)">
                        </div>
                        <div class="form-group proposal-field treasury-field" style="display: none;">
                            <label for="treasury-token-id">Token ID</label>
                            <input type="number" id="treasury-token-id" placeholder="0 for ETH/ERC20, ID for ERC721/ERC1155">
                        </div>
                        
                        <!-- Mint Proposal Fields -->
                        <div class="form-group proposal-field mint-field" style="display: none;">
                            <label for="mint-recipient">Recipient Address</label>
                            <input type="text" id="mint-recipient" placeholder="0x...">
                        </div>
                        <div class="form-group proposal-field mint-field" style="display: none;">
                            <label for="mint-amount">Amount</label>
                            <input type="number" id="mint-amount" placeholder="Number of tokens to mint">
                        </div>
                        
                        <!-- Token Price Proposal Fields -->
                        <div class="form-group proposal-field price-field" style="display: none;">
                            <label for="price-amount">New Price (in wei)</label>
                            <input type="number" id="price-amount" placeholder="Price in wei">
                        </div>
                        
                        <button id="create-proposal-btn" class="btn">Create Proposal</button>
                    </div>
                </div>
                
                <div class="proposal-list">
                    <h2>Active Proposals</h2>
                    <div id="active-proposals" class="proposals-container">
                        <!-- Proposals will be populated here -->
                        <p class="empty-message">No active proposals found.</p>
                    </div>
                </div>
            </div>

            <div id="elections" class="tab-pane">
                <h2>Active Elections</h2>
                <div id="active-elections" class="elections-container">
                    <!-- Elections will be populated here -->
                    <p class="empty-message">No active elections found.</p>
                </div>
            </div>

            <div id="history" class="tab-pane">
                <h2>Past Elections</h2>
                <div id="past-elections" class="elections-container">
                    <!-- Past elections will be populated here -->
                    <p class="empty-message">No past elections found.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="notification" class="notification">
        <span id="notification-message"></span>
        <button id="notification-close" class="notification-close">&times;</button>
    </div>

    <!-- JavaScript -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
